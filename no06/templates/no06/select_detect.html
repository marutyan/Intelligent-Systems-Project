<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>BBox Detection – Select Video</title>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/tabler-icons/2.47.0/iconfont/tabler-icons.min.css" rel="stylesheet">

<style>
:root{
  --blue:#0b7ad2;        /* 基調色 */
  --blue-dark:#075aa3;
  --green:#1abc9c;       /* チェック丸 */
  --radius:12px;
  font-family:"Inter",system-ui,sans-serif;
}

body{margin:0;padding:0;font-family:inherit;color:#333;}

h2{margin:.6rem 0 1.3rem;font-size:1.25rem;font-weight:600;}

#grid{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(220px,1fr));
  gap:1rem;
}

/* ── カード ──────────────────── */
.card{
  position:relative;
  border:2px solid transparent;
  border-radius:var(--radius);
  min-height:140px;cursor:pointer;
  background:#fff;display:flex;align-items:center;
  transition:border-color .18s,box-shadow .18s,background .18s,transform .18s;
}
.card:hover{
  background:#f1f7ff;
  transform:translateY(-2px);
  box-shadow:0 4px 12px rgba(0,0,0,.08);
}
.card input[type=radio]{position:absolute;opacity:0;pointer-events:none;}

.card-title{
  padding:1rem;
  font-size:.9rem;font-weight:500;
  display:flex;align-items:center;gap:.45rem;
}

/* ── 選択状態（色を大きく変化） ── */
.card.selected{
  background:#e8f2ff;              /* ★ 薄いブルー背景 */
  border-color:var(--blue);        /* 青枠 */
  box-shadow:0 0 0 3px rgba(11,122,210,.35);
}
.card.selected::after{
  content:"";
  position:absolute;top:8px;right:8px;
  width:22px;height:22px;border-radius:50%;background:var(--green);
  mask:url('https://cdnjs.cloudflare.com/ajax/libs/tabler-icons/2.47.0/icons/check.svg') center/contain no-repeat;
}

/* ── 実行ボタン ───────────────── */
.run-btn{
  margin-top:1.4rem;padding:.55rem 1.3rem;font-size:.92rem;font-weight:600;
  border:none;border-radius:var(--radius);
  background:var(--blue);color:#fff;cursor:pointer;transition:background .15s;
}
.run-btn:hover{background:var(--blue-dark);}

#detect-result{margin-top:1.6rem;}
</style>
</head>
<body>

<h2>Select a video for BBox Detection</h2>

<form id="detect-select-form">
  <div id="grid">
    {% for v in videos %}
      <label class="card">
        <input type="radio" name="video_id" value="{{ v.id }}">
        <span class="card-title"><i class="ti ti-video"></i>&nbsp;[{{ v.id }}] {{ v.name }}</span>
      </label>
    {% empty %}
      <p>No videos available.</p>
    {% endfor %}
  </div>

  <button type="submit" class="run-btn"><i class="ti ti-focus-2"></i>&nbsp;Run BBox</button>
</form>

<div id="detect-result"></div>

<script>
/* ── クリックで selected クラス & input チェック ── */
document.getElementById('grid').addEventListener('click', e=>{
  const card=e.target.closest('.card');
  if(!card) return;
  document.querySelectorAll('.card').forEach(c=>c.classList.remove('selected'));
  card.classList.add('selected');
  card.querySelector('input[type="radio"]').checked=true;
});
</script>
</body>
</html>
